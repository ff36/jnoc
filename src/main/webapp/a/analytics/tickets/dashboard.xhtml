<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:ez="http://xmlns.jcp.org/jsf/composite/ezcomp"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet name="css/auth.css"/>
        <h:outputStylesheet name="css/common.css"/>
        <h:outputStylesheet name="css/dc.css"/>
        <link rel="shortcut icon" type="image/png" href="#{request.contextPath}/resources/images/favicon.ico" />
        <title>#{msgs['default.page.title']} | #{msgs['admin.dashboad.page.title']}</title>
    </h:head>

    <h:body>

        <h:form id="form">

            <pe:ajaxErrorHandler />

            <p:growl id="growl" 
                     redisplay="false"
                     showDetail="false" 
                     sticky="false" />

            <ez:navigation-a/>

            <pe:layout stateCookie="#{config.ProjectStage ne 'DEV'}" widgetVar="layoutWgt" >

                <pe:layoutPane id="north" position="north" closable="false" resizable="false" size="40"/>

                <pe:layoutPane id="west" position="west" resizeWhileDragging="true" size="220">

                    <table class="navigation-sidebar">
                        <thead>
                            <tr><th>Dashboard</th></tr>
                        </thead>
                        <tfoot><tr><td></td></tr></tfoot>
                        <tbody>
                            <ui:fragment rendered="#{permissionUtil.hasPermission('ticket:access')}">
                                <tr>
                                    <td><p:commandLink value="Support Tickets" action="access-list-tickets-page" process="@this" type="button"/></td>
                                </tr>
                            </ui:fragment>
                            <ui:fragment rendered="#{permissionUtil.hasPermission('incident:access')}">
                                <tr>
                                    <td><p:commandLink value="Incidents" action="access-list-incidents-page" process="@this" type="button"/></td>
                                </tr>
                            </ui:fragment>
                            <ui:fragment rendered="#{permissionUtil.hasPermission('account:access')}">
                                <tr>
                                    <td><p:commandLink value="Accounts" action="access-accounts-list-page" process="@this" type="button"/></td>
                                </tr>
                            </ui:fragment>
                            <ui:fragment rendered="#{permissionUtil.hasPermission('company:access')}">
                                <tr>
                                    <td><p:commandLink value="Companies" action="access-list-companies-page" process="@this" type="button"/></td>
                                </tr>
                            </ui:fragment>
                            <ui:fragment rendered="#{permissionUtil.hasPermission('site:access')}">
                                <tr>
                                    <td><p:commandLink value="Sites" action="access-list-sites-page" process="@this" type="button"/></td>
                                </tr>
                            </ui:fragment>
                            <tr>
                                <td><p:commandLink value="RMA" action="access-create-rma-page" process="@this" type="button"/></td>
                            </tr>
                            <ui:fragment rendered="#{permissionUtil.hasPermission('report-basic:access')}">
                                <tr>
                                    <td><p:commandLink value="Analytics" action="access-analytics-page" process="@this" type="button"/></td>
                                </tr>
                            </ui:fragment>
                        </tbody>
                    </table>

                </pe:layoutPane>

                <pe:layoutPane id="center" position="center" resizeWhileDragging="true">

                    <table class="page-container">
                        <thead>
                            <tr><th>My Support Ticket Stats</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <table class="ticket-stats-table">
                                        <tr>
                                            <td>
                                                <h3>Open Tickets</h3>
                                                <h:outputText value="" styleClass="ticket-stats-title"/>
                                            </td>
                                            <td>
                                                <h3>Lifetime Tickets</h3>
                                                <h:outputText value="" styleClass="ticket-stats-title"/>
                                            </td>
                                            <td>
                                                <h3>Ave. Response Time</h3>
                                                <h:outputText value="" styleClass="ticket-stats-title"/>
                                            </td>
                                            <td>
                                                <h3>Ave. Resolution Time</h3>
                                                <h:outputText value="" styleClass="ticket-stats-title"/>
                                            </td>
                                            <td>
                                                <h3>Ranking</h3>
                                                <h:outputText value="" styleClass="ticket-stats-title"/>
                                            </td>
                                            <td>
                                                <h3>Feedback</h3>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td>
                                                <h:outputText value="2" styleClass="ticket-stats-value"/>
                                            </td>
                                            <td>
                                                <h:outputText value="84" styleClass="ticket-stats-value"/>
                                            </td>
                                            <td>
                                                <h:outputText value="34" styleClass="ticket-stats-value"/><h:outputText value="mins" styleClass="ticket-stats-ranking-sub"/>
                                            </td>
                                            <td>
                                                <h:outputText value="248" styleClass="ticket-stats-value"/><h:outputText value="mins" styleClass="ticket-stats-ranking-sub"/>
                                            </td>
                                            <td>
                                                <h:outputText value="3" styleClass="ticket-stats-value"/><h:outputText value="/56" styleClass="ticket-stats-ranking-sub"/>
                                            </td>
                                            <td>
                                                <h:outputText value="78%" styleClass="ticket-stats-value"/><h:outputText value="+" styleClass="ticket-stats-ranking-sub"/>
                                            </td>
                                        </tr>
                                    </table>

                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <p:spacer width="100%" height="20px"/>

                    <table class="page-container">
                        <thead>
                            <tr>
                                <th>

                                    <div class="dc-data-count">
                                        Support Ticket Stats | <span class="filter-count"></span> selected out of <span class="total-count"></span> records
                                    </div>

                                    <p:commandButton id="reset-button" 
                                                     styleClass="header-button white-button"
                                                     value="Reset"
                                                     process="@this"
                                                     onclick="dc.filterAll();dc.renderAll();"/> 
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>

                                    <p:remoteCommand autoRun="true" async="true" actionListener="#{supportTickets.init()}" update=":form:lazy-group-1 :form:csv-file-path"/>

                                    <h:panelGroup id="lazy-group-1">

                                        <p:graphicImage name="images/ajax-loader.gif" rendered="#{!supportTickets.pageInit}" styleClass="ajax-lazy-loader"/>
                                        
                                        <h:panelGroup rendered="#{supportTickets.pageInit}">
                                            
                                            <h:inputHidden id="csv-file-path" value="#{supportTickets.temporaryFilePath}"/>

                                            <h:outputScript library="js" name="d3.js"/>
                                            <h:outputScript library="js" name="dc.js"/>
                                            <h:outputScript library="js" name="crossfilter.js"/>
                                            <h:outputScript library="js" name="colorbrewer.js"/>
                                            <h:outputScript library="js" name="dashboard.js"/>
                                            
                                            <p:spacer width="100%" height="20px"/>

                                            <div class="row">
                                                <div id="gain-loss-chart">
                                                    <strong>Satisfaction</strong>
                                                    <a class="reset" href="javascript:dc.filterAll();dc.redrawAll();" style="display: none;">reset</a>

                                                    <div class="clearfix"></div>
                                                </div>

                                                <div id="quarter-chart">
                                                    <strong>Quarters</strong>
                                                    <a class="reset" href="javascript:quarterChart.filterAll();dc.redrawAll();" style="display: none;">reset</a>

                                                    <div class="clearfix"></div>
                                                </div>

                                                <div id="day-of-week-chart">
                                                    <strong>Day of Week</strong>
                                                    <a class="reset" href="javascript:dayOfWeekChart.filterAll();dc.redrawAll();" style="display: none;">reset</a>

                                                    <div class="clearfix"></div>
                                                </div>

                                                <div id="fluctuation-chart">
                                                    <strong>Fluctuation(%)</strong>
                                                    <span class="reset" style="display: none;">range: <span class="filter"></span></span>
                                                    <a class="reset" href="javascript:fluctuationChart.filterAll();dc.redrawAll();" style="display: none;">reset</a>

                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div id="yearly-bubble-chart" class="dc-chart">
                                                    <strong>Yearly Performance</strong>
                                                    <a class="reset" href="javascript:yearlyBubbleChart.filterAll();dc.redrawAll();"
                                                       style="display: none;">reset</a>

                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div id="monthly-move-chart">
                                                    <strong>Ticket Volumes</strong>
                                                    <span class="reset" style="display: none;">range: <span class="filter"></span></span>
                                                    <a class="reset" href="javascript:moveChart.filterAll();volumeChart.filterAll();dc.redrawAll();"
                                                       style="display: none;">reset</a>

                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div id="monthly-volume-chart">
                                                </div>
                                            </div>

                                            <p:spacer width="100%" height="20px"/>



                                            <div class="clearfix"></div>
                                            

                                        </h:panelGroup>

                                    </h:panelGroup>

                                </td>
                            </tr>
                        </tbody>
                    </table>

                </pe:layoutPane>

                <pe:layoutPane id="east" position="east" resizeWhileDragging="true" size="280">

                    <table class="page-container">
                        <thead>
                            <tr><th>Companies</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>

                                    <p:spacer width="100%" height="20px"/>

                                    <div class="row">
                                        <table class="table table-hover dc-data-table">
                                            <thead>
                                                <tr class="header">
                                                    <th>Company</th>
                                                    <th>Tickets</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>

                                    <div class="clearfix"></div>

                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <p:spacer width="100%" height="20px"/>

                    <table class="page-container">
                        <thead>
                            <tr><th>Sites</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>



                                </td>
                            </tr>
                        </tbody>
                    </table>

                </pe:layoutPane>

                <pe:layoutPane id="south" position="south" closable="false" resizable="false" size="40"><ez:footer/></pe:layoutPane>

            </pe:layout>

        </h:form>

    </h:body>

</html>

