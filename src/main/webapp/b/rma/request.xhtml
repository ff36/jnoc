<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:ez="http://xmlns.jcp.org/jsf/composite/ezcomp"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet name="css/auth.css"/>
        <h:outputStylesheet name="css/common.css"/>
        <link rel="shortcut icon" type="image/png" href="#{request.contextPath}/resources/images/favicon.ico" />
        <title>#{msgs['default.page.title']} | #{msgs['var.rma.page.title']}</title>
    </h:head>

    <h:body>

        #{permissionUtil.hasPagePermission('rma:access')}

        <h:form id="form">

            <pe:ajaxErrorHandler />

            <p:growl id="growl" 
                     redisplay="false"
                     showDetail="false" 
                     sticky="false" />

            <ez:navigation-a/>

            <pe:layout stateCookie="#{config.ProjectStage ne 'DEV'}" widgetVar="layourWgt">

                <pe:layoutPane id="north" position="north" closable="false" resizable="false" size="40"/>
                
                <pe:layoutPane id="west" position="west" resizeWhileDragging="true" size="220">
                    

                </pe:layoutPane>

                <pe:layoutPane id="center" position="center" resizeWhileDragging="true">
                    

                    <table width="100%">
                        <tr>
                            <td><h2>Return Material Authorization Request Form</h2></td>
                            <td width="150px">

                            </td>
                        </tr>
                    </table>

                    <table>
                        <tr>
                            <td><h:outputText value="Company Name (on invoice):*" styleClass="field-label-3"/></td>
                            <td><p:inputText value="#{rmaRequest.companyName}" required="true" requiredMessage="Company name is required"/></td>
                        </tr>
                        <tr>
                            <td><h:outputText value="Project Name:*" styleClass="field-label-3"/></td>
                            <td><p:inputText value="#{rmaRequest.projectName}" required="true" requiredMessage="Project name is required"/></td>
                        </tr>
                        <tr>
                            <td><h:outputText value="Quote/Sales Order/Fulfillment #:" styleClass="field-label-3"/></td>
                            <td><p:inputText value="#{rmaRequest.orderNumber}"/></td>
                        </tr>
                    </table>

                    <p:spacer width="100%" height="20"/>
                    <h2>RMA Contact (responsible for return of product):</h2>

                    <table>
                        <tr>
                            <td><h:outputText value="Name:*" styleClass="field-label-3"/></td>
                            <td><p:inputText value="#{rmaRequest.responsibleName}" required="true" requiredMessage="Name is required"/></td>
                        </tr>
                        <tr>
                            <td><h:outputText value="Company:*" styleClass="field-label-3"/></td>
                            <td><p:inputText value="#{rmaRequest.responsibleCompany}" required="true" requiredMessage="Company is required"/></td>
                        </tr>
                        <tr>
                            <td><h:outputText value="Phone:*" styleClass="field-label-3"/></td>
                            <td><p:inputText value="#{rmaRequest.responsiblePhone}" required="true" requiredMessage="Phone is required"/></td>
                        </tr>
                        <tr>
                            <td><h:outputText value="Email:*" styleClass="field-label-3"/></td>
                            <td><p:inputText value="#{rmaRequest.responsibleEmail}" required="true" requiredMessage="Email is required"/></td>
                        </tr>
                    </table>

                    <p:spacer width="100%" height="20"/>
                    <h2>Replacement Product Ship To Info:</h2>

                    <table class="table-align-spacer">
                        <tr>
                            <td>
                                <table>
                                    <tr>
                                        <td><h:outputText value="Name:*" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingName}" required="true" requiredMessage="Name is required"/></td>
                                    </tr>
                                    <tr>
                                        <td><h:outputText value="Company:*" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingCompany}" required="true" requiredMessage="Company is required"/></td>
                                    </tr>
                                    <tr>
                                        <td><h:outputText value="Phone:*" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingPhone}" required="true" requiredMessage="Phone is required"/></td>
                                    </tr>
                                    <tr>
                                        <td><h:outputText value="Email:*" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingEmail}" required="true" requiredMessage="Email is required"/></td>
                                    </tr>                                  
                                </table>
                            </td>
                            <td>
                                <table>
                                    <tr>
                                        <td><h:outputText value="Address 1:*" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingAddress1}" required="true" requiredMessage="Address 1 is required"/></td>
                                    </tr>
                                    <tr>
                                        <td><h:outputText value="Address 2:" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingAddress2}"/></td>
                                    </tr>
                                    <tr>
                                        <td><h:outputText value="City:*" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingCity}" required="true" requiredMessage="City is required"/></td>
                                    </tr>
                                    <tr>
                                        <td><h:outputText value="State:*" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingState}" required="true" requiredMessage="State is required"/></td>
                                    </tr>
                                    <tr>
                                        <td><h:outputText value="Zip:*" styleClass="field-label-3"/></td>
                                        <td><p:inputText value="#{rmaRequest.shippingZip}" required="true" requiredMessage="Zip is required"/></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>


                    <table>
                        <tr>
                            <td><h:outputText value="Ship To address accepts Saturday deliveries?*" styleClass="field-label-3"/></td>
                            <td><p:selectBooleanButton value="#{rmaRequest.saturdayDelivery}" onLabel="Yes" offLabel="No" /> </td>
                        </tr>
                        <tr>
                            <td><h:outputText value="Date replacement product must be delivered?*" styleClass="field-label-3"/></td>
                            <td><p:calendar value="#{rmaRequest.deliveryDate}" showButtonPanel="true"/></td>
                        </tr>
                    </table>

                    <p:spacer width="100%" height="20"/>
                    <h2>Products:</h2>

                    <p:dataTable id="product-table" styleClass="product-table" value="#{rmaRequest.products}" var="product">  

                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="Serial Number" />  
                            </f:facet>  
                            <h:outputText value="#{product.serialNumber}" />  
                        </p:column>  

                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="Part Number" />  
                            </f:facet>  
                            <h:outputText value="#{product.partNumber}" />  
                        </p:column> 

                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="Part Name" />  
                            </f:facet>  
                            <h:outputText value="#{product.partName}" />  
                        </p:column> 

                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="Reason for return" />  
                            </f:facet>  
                            <h:outputText value="#{product.returnReason}" />  
                        </p:column> 

                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="Failure stage" />  
                            </f:facet>  
                            <h:outputText value="#{product.failureStage}" />  
                        </p:column> 

                        <p:column>  
                            <f:facet name="header">  
                                <h:outputText value="Quantity" />  
                            </f:facet>  
                            <h:outputText value="#{product.qty}" />  
                        </p:column> 

                        <p:column>  
                            <p:commandLink value="Remove" update="product-table" process="@this,product-table"
                                           action="#{rmaRequest.removeProduct(product)}"/>  
                        </p:column>  

                    </p:dataTable>

                    <p:spacer width="100%" height="20px"/>

                    <p:commandButton id="submit-btn" 
                                     value="Submit RMA"
                                     action="#{rmaRequest.request()}"
                                     onclick="PF('blockui1').block();"
                                     oncomplete="PF('blockui1').unblock();"
                                     update=":form:growl"
                                     process="@this,:form:center"/>

                    <pe:blockUI target="submit-btn" widgetVar="blockui1">  
                        <div class="windows8-18-b">
                            <div class="wBall" id="wBall_1">
                                <div class="wInnerBall">
                                </div>
                            </div>
                            <div class="wBall" id="wBall_2">
                                <div class="wInnerBall">
                                </div>
                            </div>
                            <div class="wBall" id="wBall_3">
                                <div class="wInnerBall">
                                </div>
                            </div>
                            <div class="wBall" id="wBall_4">
                                <div class="wInnerBall">
                                </div>
                            </div>
                            <div class="wBall" id="wBall_5">
                                <div class="wInnerBall">
                                </div>
                            </div>
                        </div> 
                    </pe:blockUI>

                </pe:layoutPane>

                <pe:layoutPane id="east" position="east" resizeWhileDragging="true" size="450">
                    

                    <p:panel>

                        <h:panelGrid id="product-grid" columns="2" columnClasses="field-label-3">

                            <h:outputText value="Quantity:*"/>
                            <p:spinner value="#{rmaRequest.rmaProduct.qty}"/>

                            <h:outputText value="Serial Number:*"/>
                            <p:inputText value="#{rmaRequest.rmaProduct.serialNumber}" required="true" requiredMessage="Serial Number is required"/>

                            <h:outputText value="Part Number:*"/>
                            <p:inputText value="#{rmaRequest.rmaProduct.partNumber}"/>

                            <h:outputText value="Part Name:*"/>
                            <p:inputText value="#{rmaRequest.rmaProduct.partName}" required="true" requiredMessage="Part Name is required"/>

                            <h:outputText value="Reason for return:*"/>
                            <p:selectOneMenu value="#{rmaRequest.rmaProduct.returnReason}" required="true" requiredMessage="Return reason required" style="width: 150px"> 
                                <f:selectItem itemLabel="Not Needed" itemValue="Not Needed" />  
                                <f:selectItem itemLabel="Wrong Item" itemValue="Wrong Item" />  
                                <f:selectItem itemLabel="Failure" itemValue="Failure" />  
                            </p:selectOneMenu>

                            <h:outputText value="Failure Stage:*"/>
                            <p:selectOneMenu value="#{rmaRequest.rmaProduct.failureStage}" required="true" requiredMessage="Failure stage required"> 
                                <f:selectItem itemLabel="Not Applicable" itemValue="Not Applicable" />  
                                <f:selectItem itemLabel="In Service" itemValue="In Service" />  
                                <f:selectItem itemLabel="During Implementation" itemValue="During Implementation" />  
                            </p:selectOneMenu>

                            <h:outputText value="Reported Issue Details:*" styleClass="field-label-3"/>
                            <p:inputTextarea value="#{rmaRequest.rmaProduct.issueDetails}" required="true" requiredMessage="Issue Details are required" rows="10" cols="20"/>

                            <h:outputText value="What troubleshooting steps have been taken to resolve this issue?:*" styleClass="field-label-3"/>
                            <p:inputTextarea value="#{rmaRequest.rmaProduct.troubleshooting}" required="true" requiredMessage="Troubleshooting is required" rows="10" cols="20"/>

                            <p:commandButton id="btn_product" value="Add Product" 
                                             update="product-grid @(.product-table)" 
                                             process="@this,product-grid"
                                             action="#{rmaRequest.addProduct()}"/>

                        </h:panelGrid>

                    </p:panel>

                </pe:layoutPane>

            </pe:layout>

        </h:form>

        <!-- JIRA -->
        <script type="text/javascript" src="https://dastrax.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e/en_US-hgwqx7-1988229788/6132/31/1.4.0-m5/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=5962a16e"></script>


    </h:body>

</html>

