<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>

        <ui:composition template="./../resources/template/public.xhtml">

            <ui:define name="title">
                #{webBundle['default.page.title']} | #{webBundle['confirm.email.page.title']}
            </ui:define>

            <ui:define name="content">

                <pe:ajaxErrorHandler />

                <f:metadata>
                    <f:viewParam name="token" 
                                 value="#{settings.helper.token}"/>
                </f:metadata>

                <h2>Confirm Account</h2>

                <p:spacer width="100%" height="20"/>

                <h:outputText value="You have almost completed the process. Please just confirm your account password. Once you click 'confirm' your new email address will be updated."/>

                <p:spacer width="100%" height="10"/>

                <p:messages id="messages"
                            redisplay="false"
                            showDetail="false" 
                            autoUpdate="true"
                            closable="true"/>

                <h:form id="form">

                    <h:panelGrid columns="3">

                        <h:outputText value="Password:*" styleClass="field-label"/>
                        <p:password value="#{settings.helper.principalPsw}"/>
                        
                    </h:panelGrid>

                    <p:spacer width="100%" height="20"/>

                    <p:commandButton id="change-email-btn" 
                                     value="Confirm"
                                     action="#{settings.confirm()}"
                                     onclick="blockui1.block();"
                                     oncomplete="blockui1.unblock();"
                                     update=":messages"/>

                    <pe:blockUI target="change-email-btn" widgetVar="blockui1">  
                        <div class="windows8-18-b">
                            <div class="wBall" id="wBall_1">
                                <div class="wInnerBall">
                                </div>
                            </div>
                            <div class="wBall" id="wBall_2">
                                <div class="wInnerBall">
                                </div>
                            </div>
                            <div class="wBall" id="wBall_3">
                                <div class="wInnerBall">
                                </div>
                            </div>
                            <div class="wBall" id="wBall_4">
                                <div class="wInnerBall">
                                </div>
                            </div>
                            <div class="wBall" id="wBall_5">
                                <div class="wInnerBall">
                                </div>
                            </div>
                        </div> 
                    </pe:blockUI>

                </h:form>

            </ui:define>

        </ui:composition>

    </body>
</html>
